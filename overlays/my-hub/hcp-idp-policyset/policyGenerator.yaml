---
apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: policy-generator
placementBindingDefaults:
  name: placementbinding-idp-for-hcp

policyDefaults:
  standards:
    - "NIST SP 800-53"
  categories:
    - "CM Configuration Management"
  controls:
    - "CM-2 Baseline Configuration"
  namespace: yantra-rhacm-policies
  consolidateManifests: false
  remediationAction: inform
  severity: medium
  generatePolicyPlacement: false

policies:
- name: hcp-idp-htpasswd
  remediationAction: enforce 
  disabled: false
  manifests:
    - path: htpasswd/
      remediationAction: enforce

- name: hcp-idp-ldap
  remediationAction: enforce 
  disabled: false
  manifests:
    - path: ldap/
      remediationAction: enforce

policySets:
- name: "hcp-idp"
  description: "Setting up Identity Providers for HCP"
  policies:
  - hcp-idp-htpasswd
  - hcp-idp-ldap
  placement:
    placementName: hub-only
